<!doctype html>
<html lang="ka">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>áƒ“áƒ¦áƒ˜áƒ¡/áƒ¦áƒáƒ›áƒ˜áƒ¡ áƒ áƒ”áƒŸáƒ˜áƒ›áƒ˜áƒ¡ áƒ¨áƒ”áƒ›áƒáƒ›áƒ™áƒ˜áƒ—áƒ®áƒáƒ•áƒ˜</title>
  <style>
    :root {
      --bg: #ffffff;
      --fg: #111111;
      --accent: #0b66ff;
    }

    [data-theme="dark"] {
      --bg: #0b0f14;
      --fg: #e6eef8;
      --accent: #66b2ff;
    }

    html,body {
      height: 100%;
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg, var(--bg), color-mix(in srgb, var(--bg) 90%, var(--accent) 10%));
      color: var(--fg);
      display: grid;
      place-items: center;
      padding: 24px;
      box-sizing: border-box;
    }

    .card {
      width: 100%;
      max-width: 760px;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 8px 30px rgba(2,8,23,0.15);
      background: color-mix(in srgb, var(--bg) 95%, #0000 5%);
      backdrop-filter: blur(6px);
    }

    h1 { margin: 0 0 8px 0; font-size: 1.4rem; }
    p { margin: 0 0 12px 0; line-height: 1.45; }

    .message {
      padding: 14px;
      border-radius: 8px;
      border: 1px solid rgba(0,0,0,0.06);
      background: color-mix(in srgb, var(--fg) 4%, #0000);
      font-weight: 600;
    }

    .controls {
      margin-top: 14px;
      display: flex;
      gap: 8px;
      align-items: center;
      flex-wrap: wrap;
    }

    select, button {
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid rgba(0,0,0,0.08);
      font-size: 0.95rem;
      background: transparent;
      color: var(--fg);
    }

    .note { margin-top:10px; font-size:0.88rem; color: color-mix(in srgb, var(--fg) 70%, #0000); }
    @media (prefers-color-scheme: dark) {
      /* If user hasn't overridden via data-theme, body will still default visually; JS handles actual theme selection */
    }
  </style>
</head>
<body>
  <div class="card" role="region" aria-label="áƒ“áƒáƒ¡áƒáƒ™áƒáƒœáƒ¢áƒ áƒáƒšáƒ”áƒ‘áƒ”áƒšáƒ˜ áƒ‘áƒšáƒáƒ™áƒ˜">
    <h1>áƒ’áƒáƒ›áƒáƒ˜áƒªáƒáƒœáƒ˜ â€” áƒ“áƒ¦áƒ”áƒ áƒ—áƒ£ áƒ¦áƒáƒ›áƒ”?</h1>
    <p>áƒ•áƒ”áƒ‘-áƒ’áƒ•áƒ”áƒ áƒ“áƒ˜ áƒ¡áƒªáƒ“áƒ”áƒ‘áƒ áƒ¡áƒ˜áƒ¡áƒ¢áƒ”áƒ›áƒ£áƒ áƒ˜ áƒ áƒ”áƒŸáƒ˜áƒ›áƒ˜áƒ¡ áƒ¨áƒ”áƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒáƒ¡ áƒ“áƒ áƒáƒ›áƒáƒ–áƒ” áƒ›áƒ˜áƒ‘áƒ›áƒ£áƒšáƒáƒ“ áƒáƒ©áƒ•áƒ”áƒœáƒ”áƒ‘áƒ¡ áƒ¡áƒ®áƒ•áƒáƒ“áƒáƒ¡áƒ®áƒ•áƒ áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ¡. áƒ¨áƒ”áƒ’áƒ˜áƒ«áƒšáƒ˜áƒ áƒ’áƒáƒ“áƒáƒ áƒ—áƒ áƒ®áƒ”áƒšáƒ˜áƒ—áƒáƒª.</p>

    <div id="message" class="message" aria-live="polite">áƒáƒ áƒ£áƒšáƒáƒ‘áƒ¡ áƒ¨áƒ”áƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ...</div>

    <div class="controls" aria-hidden="false">
      <label for="modeSelect">áƒ áƒ”áƒŸáƒ˜áƒ›áƒ˜:</label>
      <select id="modeSelect" title="áƒáƒ áƒ©áƒ”áƒ•áƒ: Auto = áƒ¡áƒ˜áƒ¡áƒ¢áƒ”áƒ›áƒ£áƒ áƒ˜ áƒáƒœ áƒ“áƒ áƒ, Light = áƒ“áƒ¦áƒ”, Dark = áƒ¦áƒáƒ›áƒ”">
        <option value="auto">Auto (áƒ¡áƒ˜áƒ¡áƒ¢áƒ”áƒ›áƒ / áƒ“áƒ áƒ)</option>
        <option value="light">Light (áƒ“áƒ¦áƒ”)</option>
        <option value="dark">Dark (áƒ¦áƒáƒ›áƒ”)</option>
      </select>

      <button id="resetBtn" type="button" title="áƒ£áƒ¤áƒ¡áƒ™áƒ áƒ£áƒšáƒáƒ›áƒ“áƒ” áƒ“áƒáƒáƒ‘áƒ áƒ£áƒœáƒ” áƒáƒ•áƒ¢áƒáƒ›áƒáƒ¢áƒ£áƒ  áƒ áƒ”áƒŸáƒ˜áƒ›áƒ¨áƒ˜">Default (auto)</button>
    </div>

    <div class="note">
      áƒ¨áƒ”áƒœáƒáƒ®áƒ£áƒšáƒ˜áƒ áƒáƒ“áƒ•áƒ˜áƒšáƒ˜ áƒ’áƒáƒ“áƒáƒ áƒ—áƒ•áƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡. áƒ¡áƒ˜áƒ¡áƒ¢áƒ”áƒ›áƒ£áƒ áƒ˜ áƒªáƒ•áƒšáƒ˜áƒšáƒ”áƒ‘áƒ”áƒ‘áƒ˜ (áƒœáƒáƒ§áƒáƒ áƒ˜ dark/light) áƒ“áƒáƒ˜áƒ­áƒ”áƒ áƒ¡ áƒáƒ•áƒ¢áƒáƒ›áƒáƒ¢áƒ£áƒ áƒáƒ“ áƒ áƒáƒªáƒ áƒáƒ áƒ˜áƒ¡ Auto.
    </div>
  </div>

  <script>
    (function () {
      const msgEl = document.getElementById('message');
      const select = document.getElementById('modeSelect');
      const resetBtn = document.getElementById('resetBtn');
      const THEME_KEY = 'siteThemeMode'; // 'auto' | 'dark' | 'light'

      // Detect system preference media query
      const mq = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)');

      function timeBasedIsDark() {
        const h = new Date().getHours();
        // Define night as 18:00 - 05:59
        return (h >= 18 || h < 6);
      }

      // Resolve effective theme based on stored preference, system, and time fallback
      function resolveTheme() {
        const stored = localStorage.getItem(THEME_KEY) || 'auto';
        if (stored === 'light' || stored === 'dark') return stored;
        // auto: prefer system if available, else use time
        if (mq && typeof mq.matches === 'boolean') {
          return mq.matches ? 'dark' : 'light';
        }
        return timeBasedIsDark() ? 'dark' : 'light';
      }

      // Update visual theme and message
      function applyTheme(theme) {
        // theme: 'dark' or 'light'
        document.documentElement.setAttribute('data-theme', theme === 'dark' ? 'dark' : 'light');

        // Put any localized message you want here:
        if (theme === 'dark') {
          msgEl.textContent = 'áƒ’áƒáƒ›áƒáƒ áƒ¯áƒáƒ‘áƒ â€” áƒáƒ®áƒšáƒ áƒ¦áƒáƒ›áƒ˜áƒ¡ áƒ áƒ”áƒŸáƒ˜áƒ›áƒ˜áƒ ğŸŒ™\náƒ¬áƒ§áƒ•áƒ“áƒ˜áƒáƒ“áƒ¨áƒ˜ áƒ£áƒ¤áƒ áƒ áƒ›áƒ¨áƒ•áƒ˜áƒ“áƒ˜áƒ.';
        } else {
          msgEl.textContent = 'áƒ“áƒ˜áƒšáƒ áƒ›áƒ¨áƒ•áƒ˜áƒ“áƒáƒ‘áƒ˜áƒ¡áƒ â€” áƒ“áƒ¦áƒ”áƒ â˜€ï¸\náƒ‘áƒœà¦¨à§à¦¦áƒ•áƒáƒ“ áƒáƒ áƒ˜áƒ¡ áƒ“áƒ áƒœáƒáƒ—áƒ”áƒšáƒ˜áƒ.';
        }

        // Also show the reason (system/time/override)
        const stored = localStorage.getItem(THEME_KEY) || 'auto';
        let reason = '';
        if (stored === 'light' || stored === 'dark') reason = ' (áƒ›áƒáƒ—áƒ˜áƒ—áƒ”áƒ‘áƒ£áƒšáƒ˜ áƒ¨áƒ”áƒœáƒ˜áƒ—)';
        else if (mq && typeof mq.matches === 'boolean') reason = ' (áƒ¡áƒ˜áƒ¡áƒ¢áƒ”áƒ›áƒ£áƒ áƒ˜ áƒáƒáƒ áƒáƒ›áƒ”áƒ¢áƒ áƒ˜)';
        else reason = ' (áƒ“áƒ áƒáƒ˜áƒ¡ áƒ›áƒ˜áƒ®áƒ”áƒ“áƒ•áƒ˜áƒ—)';
        msgEl.textContent += reason;
      }

      // Initial set-up
      function init() {
        // restore selection UI
        const stored = localStorage.getItem(THEME_KEY) || 'auto';
        select.value = stored;

        // apply initial theme
        const theme = resolveTheme();
        applyTheme(theme);
      }

      // When system preference changes and user is in Auto, respond
      if (mq && typeof mq.addEventListener === 'function') {
        mq.addEventListener('change', (e) => {
          if ((localStorage.getItem(THEME_KEY) || 'auto') === 'auto') {
            const themeNow = e.matches ? 'dark' : 'light';
            applyTheme(themeNow);
          }
        });
      } else if (mq && typeof mq.addListener === 'function') {
        // older browsers
        mq.addListener((e) => {
          if ((localStorage.getItem(THEME_KEY) || 'auto') === 'auto') {
            const themeNow = e.matches ? 'dark' : 'light';
            applyTheme(themeNow);
          }
        });
      }

      // UI change
      select.addEventListener('change', () => {
        const val = select.value;
        if (val === 'auto') {
          localStorage.removeItem(THEME_KEY);
        } else {
          localStorage.setItem(THEME_KEY, val);
        }
        applyTheme(resolveTheme());
      });

      resetBtn.addEventListener('click', () => {
        select.value = 'auto';
        localStorage.removeItem(THEME_KEY);
        applyTheme(resolveTheme());
      });

      // If no system support, periodically check time when in auto (to update after midnight etc.)
      if (!mq) {
        // check every 5 minutes
        setInterval(() => {
          if ((localStorage.getItem(THEME_KEY) || 'auto') === 'auto') {
            applyTheme(resolveTheme());
          }
        }, 5 * 60 * 1000);
      }

      // Run initial
      init();
    })();
  </script>
</body>
</html>
