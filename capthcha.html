<!DOCTYPE html>
<html lang="ka">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAPTCHA áƒ¡áƒ˜áƒ¡áƒ¢áƒ”áƒ›áƒ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            touch-action: manipulation;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .container {
            width: 100%;
            max-width: 500px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            margin: 20px 0;
        }
        
        header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        h1 {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }
        
        .description {
            font-size: 1rem;
            opacity: 0.8;
            margin-bottom: 10px;
        }
        
        .challenge-container {
            padding: 20px;
            min-height: 400px;
            display: flex;
            flex-direction: column;
        }
        
        .challenge {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex-grow: 1;
            text-align: center;
        }
        
        .challenge-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: #2c3e50;
        }
        
        .challenge-description {
            margin-bottom: 5px;
            font-size: 1.1rem;
            color: #7f8c8d;
        }
        
        /* CAPTCHA áƒ¡áƒ¢áƒ˜áƒšáƒ”áƒ‘áƒ˜ */
        .captcha-display {
            font-size: 2.5rem;
            font-weight: bold;
            letter-spacing: 8px;
            margin: 0px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
            border: 3px solid #3498db;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Courier New', monospace;
        }
        
        .captcha-input {
            font-size: 2.5rem;
            padding: 15px;
            width: 100%;
            max-width: 400px;
            text-align: center;
            border: 3px solid #3498db;
            border-radius: 10px;
            margin: 5px 0;
            letter-spacing: 8px;
            font-family: 'Courier New', monospace;
            font-weight: bold;
        }
        
        .captcha-input:focus {
            outline: none;
            border-color: #2980b9;
            box-shadow: 0 0 10px rgba(52, 152, 219, 0.5);
        }
        
        .input-instruction {
            background: #fff3cd;
            color: #856404;
            padding: 12px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #ffc107;
            font-size: 0.9rem;
            text-align: center;
            width: 100%;
        }
        
        button {
            background: #3498db;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            min-height: 50px;
            min-width: 150px;
        }
        
        button:hover, button:active {
            background: #2980b9;
            transform: translateY(-2px);
        }
        
        button:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
        }
        
        .success-screen {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 30px;
            flex-grow: 1;
        }
        
        .success-icon {
            font-size: 4rem;
            color: #2ecc71;
            margin-bottom: 20px;
        }
        
        .success-title {
            font-size: 2rem;
            margin-bottom: 15px;
            color: #2c3e50;
        }
        
        .success-message {
            font-size: 1.2rem;
            color: #7f8c8d;
            margin-bottom: 30px;
        }
        
        .restart-button {
            background: #2ecc71;
        }
        
        .restart-button:hover, .restart-button:active {
            background: #27ae60;
        }
        
        .phase-indicator {
            background: #e8f4fd;
            color: #0c5460;
            padding: 10px;
            border-radius: 10px;
            margin: 10px 0;
            border: 2px solid #b8daff;
            font-size: 1rem;
            font-weight: bold;
        }
        
        /* áƒ›áƒáƒœáƒ˜áƒ¨áƒ•áƒœáƒ˜áƒ— CAPTCHA-áƒ¡ áƒ¡áƒ¢áƒ˜áƒšáƒ”áƒ‘áƒ˜ */
        .captcha-display.selectable {
            cursor: pointer;
            user-select: text;
            -webkit-user-select: text;
            transition: all 0.3s ease;
        }
        
        .captcha-display.selectable:hover {
            background: #e8f9fa;
            border-color: #2980b9;
        }
        
        .selection-indicator {
            position: absolute;
            background: rgba(52, 152, 219, 0.2);
            border: 2px solid #3498db;
            border-radius: 5px;
            pointer-events: none;
            z-index: 10;
            transition: all 0.2s ease;
        }
        
        .special-instruction {
            background: #d4edda;
            color: #155724;
            padding: 12px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #28a745;
            font-size: 0.9rem;
            text-align: center;
            width: 100%;
        }
        
        .warning-instruction {
            background: #ffeaa7;
            color: #d35400;
            padding: 12px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #f39c12;
            font-size: 0.9rem;
            text-align: center;
            width: 100%;
        }
        
        .info-instruction {
            background: #d6eaf8;
            color: #21618c;
            padding: 12px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #3498db;
            font-size: 0.9rem;
            text-align: center;
            width: 100%;
        }
        
        @media (max-width: 480px) {
            .container {
                border-radius: 15px;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            .challenge-title {
                font-size: 1.3rem;
            }
            
            button {
                padding: 12px 25px;
                font-size: 1rem;
            }
            
            .captcha-display, .captcha-input {
                font-size: 2rem;
                letter-spacing: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1 id="mainTitle">CAPTCHA áƒ¢áƒ”áƒ¡áƒ¢áƒ˜</h1>
            
        </header>
        
        <div class="challenge-container">
            <!-- áƒáƒ˜áƒ áƒ•áƒ”áƒšáƒ˜ áƒ”áƒ¢áƒáƒáƒ˜ - áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒ˜ CAPTCHA -->
            <div class="challenge active" id="georgianChallenge">
                <div class="phase-indicator">áƒ”áƒ¢áƒáƒáƒ˜ 1/3</div>
                
                <p class="challenge-description">áƒ¨áƒ”áƒ˜áƒ§áƒ•áƒáƒœáƒ”áƒ— áƒ¥áƒ•áƒ”áƒ›áƒáƒ— áƒ›áƒáƒªáƒ”áƒ›áƒ£áƒšáƒ˜ CAPTCHA</p>
                
                <div class="captcha-display" id="georgianCaptchaDisplay">
                    <!-- CAPTCHA áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ˜ áƒ“áƒáƒ”áƒ›áƒáƒ¢áƒ”áƒ‘áƒ JavaScript-áƒ˜áƒ— -->
                </div>
                
                <div class="info-instruction">
                    ğŸ’¡ áƒáƒ áƒáƒ¡áƒáƒ“áƒ”áƒ¡ áƒ“áƒáƒ˜áƒ•áƒ˜áƒ¬áƒ§áƒ áƒ˜áƒ¡, áƒ áƒáƒª áƒ¨áƒ”áƒœáƒ¡ áƒ˜áƒ“áƒ”áƒœáƒ¢áƒáƒ‘áƒáƒ¡ áƒ¥áƒ›áƒœáƒ˜áƒ¡.
                </div>

                <input type="text" class="captcha-input" id="georgianCaptchaInput" maxlength="8" placeholder="áƒ©áƒáƒ¬áƒ”áƒ áƒ”áƒ— CAPTCHA áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒáƒ“">
                
                <button id="verifyGeorgianButton">áƒ¨áƒ”áƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ</button>
            </div>
            
            <!-- áƒ›áƒ”áƒáƒ áƒ” áƒ”áƒ¢áƒáƒáƒ˜ - áƒ›áƒáƒœáƒ˜áƒ¨áƒ•áƒœáƒ˜áƒ— CAPTCHA -->
            <div class="challenge" id="selectionChallenge" style="display: none;">
                <div class="phase-indicator">áƒ”áƒ¢áƒáƒáƒ˜ 2/3</div>
                
                <p class="challenge-description">áƒ¨áƒ”áƒ˜áƒ§áƒ•áƒáƒœáƒ”áƒ— áƒ¥áƒ•áƒ”áƒ›áƒáƒ— áƒ›áƒáƒªáƒ”áƒ›áƒ£áƒšáƒ˜ CAPTCHA</p>
                
                <div class="captcha-display selectable" id="selectionCaptchaDisplay">
                    ********
                </div>
                
                <div class="special-instruction">
                    ğŸ’¡ áƒáƒ  áƒáƒ áƒ¡áƒ”áƒ‘áƒáƒ‘áƒ¡ áƒ“áƒáƒ¤áƒáƒ áƒ£áƒšáƒ˜, áƒ áƒáƒ› áƒáƒ  áƒ’áƒáƒ›áƒáƒ©áƒœáƒ“áƒ”áƒ¡, áƒ“áƒ áƒáƒ áƒª áƒ áƒáƒ› áƒ¡áƒáƒ˜áƒ“áƒ£áƒ›áƒšáƒ, áƒ áƒáƒ› áƒáƒ  áƒ’áƒáƒ›áƒŸáƒ¦áƒáƒ•áƒœáƒ“áƒ”áƒ¡. áƒšáƒ£áƒ™áƒ 12.2
                </div>
               
                <input type="text" class="captcha-input" id="selectionCaptchaInput" maxlength="8" placeholder="áƒ©áƒáƒ¬áƒ”áƒ áƒ”áƒ— CAPTCHA">
                
                <button id="verifySelectionButton">áƒ¨áƒ”áƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ</button>
            </div>
            
            <!-- áƒ›áƒ”áƒ¡áƒáƒ›áƒ” áƒ”áƒ¢áƒáƒáƒ˜ - áƒ‘áƒ áƒ£áƒœáƒ•áƒáƒ“áƒ˜ CAPTCHA -->
            <div class="challenge" id="rotatingChallenge" style="display: none;">
                <div class="phase-indicator">áƒ”áƒ¢áƒáƒáƒ˜ 3/3</div>
                
                <p class="challenge-description">áƒ¨áƒ”áƒ˜áƒ§áƒ•áƒáƒœáƒ”áƒ— áƒ¥áƒ•áƒ”áƒ›áƒáƒ— áƒ›áƒáƒªáƒ”áƒ›áƒ£áƒšáƒ˜ CAPTCHA</p>
                
                <div class="captcha-display" id="rotatingCaptchaDisplay">
                    <!-- CAPTCHA áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ˜ áƒ“áƒáƒ”áƒ›áƒáƒ¢áƒ”áƒ‘áƒ JavaScript-áƒ˜áƒ— -->
                </div>
                
                <div class="warning-instruction">
                    âš ï¸ áƒªáƒ•áƒšáƒ˜áƒšáƒ”áƒ‘áƒ”áƒ‘áƒ˜ áƒáƒ áƒáƒ¡áƒ“áƒ áƒáƒ¡ áƒáƒ  áƒáƒ áƒ˜áƒ¡ áƒ¨áƒ”áƒ›áƒ—áƒ®áƒ•áƒ”áƒ•áƒ˜áƒ—áƒáƒ‘áƒ!
                </div>
                <input type="text" class="captcha-input" id="rotatingCaptchaInput" maxlength="8" placeholder="áƒ©áƒáƒ¬áƒ”áƒ áƒ”áƒ— CAPTCHA">
                
                <button id="verifyRotatingButton">áƒ¨áƒ”áƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ</button>
            </div>
            
            <!-- áƒ¤áƒ˜áƒœáƒáƒšáƒ£áƒ áƒ˜ áƒ¬áƒáƒ áƒ›áƒáƒ¢áƒ”áƒ‘áƒ˜áƒ¡ áƒ”áƒ™áƒ áƒáƒœáƒ˜ -->
            <div class="success-screen" id="successScreen">
                <div class="success-icon">âœ…</div>
                <h2 class="success-title">áƒ’áƒ˜áƒšáƒáƒªáƒáƒ•áƒ—!</h2>
                <p class="success-message">áƒ—áƒ¥áƒ•áƒ”áƒœ áƒ¬áƒáƒ áƒ›áƒáƒ¢áƒ”áƒ‘áƒ˜áƒ— áƒ“áƒáƒáƒ›áƒ¢áƒ™áƒ˜áƒªáƒ”áƒ—, áƒ áƒáƒ› áƒáƒ  áƒ®áƒáƒ áƒ— áƒ áƒáƒ‘áƒáƒ¢áƒ˜!</p>
                <button class="restart-button" id="restartButton">áƒ—áƒáƒ•áƒ˜áƒ“áƒáƒœ áƒ“áƒáƒ¬áƒ§áƒ”áƒ‘áƒ</button>
            </div>
        </div>
    </div>

    <script>
        // áƒ”áƒšáƒ”áƒ›áƒ”áƒœáƒ¢áƒ”áƒ‘áƒ˜áƒ¡ áƒ›áƒ˜áƒ—áƒ˜áƒ—áƒ”áƒ‘áƒ”áƒ‘áƒ˜
        const mainTitle = document.getElementById('mainTitle');
        const georgianChallenge = document.getElementById('georgianChallenge');
        const selectionChallenge = document.getElementById('selectionChallenge');
        const rotatingChallenge = document.getElementById('rotatingChallenge');
        const georgianCaptchaDisplay = document.getElementById('georgianCaptchaDisplay');
        const selectionCaptchaDisplay = document.getElementById('selectionCaptchaDisplay');
        const rotatingCaptchaDisplay = document.getElementById('rotatingCaptchaDisplay');
        const georgianCaptchaInput = document.getElementById('georgianCaptchaInput');
        const selectionCaptchaInput = document.getElementById('selectionCaptchaInput');
        const rotatingCaptchaInput = document.getElementById('rotatingCaptchaInput');
        const verifyGeorgianButton = document.getElementById('verifyGeorgianButton');
        const verifySelectionButton = document.getElementById('verifySelectionButton');
        const verifyRotatingButton = document.getElementById('verifyRotatingButton');
        const successScreen = document.getElementById('successScreen');
        const restartButton = document.getElementById('restartButton');
        
        // áƒ˜áƒœáƒ’áƒšáƒ˜áƒ¡áƒ£áƒ -áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒ˜ áƒ¡áƒ˜áƒ›áƒ‘áƒáƒšáƒáƒ”áƒ‘áƒ˜áƒ¡ áƒ áƒ£áƒ™áƒ
        const enToKaMap = {
            'A': 'áƒ', 'B': 'áƒ‘', 'C': 'áƒª', 'D': 'áƒ“', 'E': 'áƒ”', 'F': 'áƒ¤', 'G': 'áƒ’',
            'H': 'áƒ°', 'I': 'áƒ˜', 'J': 'áƒ¯', 'K': 'áƒ™', 'L': 'áƒš', 'M': 'áƒ›', 'N': 'áƒœ',
            'O': 'áƒ', 'P': 'áƒ', 'Q': 'áƒ¥', 'R': 'áƒ ', 'S': 'áƒ¡', 'T': 'áƒ¢', 'U': 'áƒ£',
            'V': 'áƒ•', 'W': 'áƒ¬', 'X': 'áƒ®', 'Y': 'áƒ§', 'Z': 'áƒ–',
            '0': '0', '1': '1', '2': '2', '3': '3', '4': '4', '5': '5', 
            '6': '6', '7': '7', '8': '8', '9': '9'
        };
        
        // áƒ§áƒ•áƒ”áƒšáƒ áƒ¨áƒ”áƒ¡áƒáƒ«áƒšáƒ áƒ¡áƒ˜áƒ›áƒ‘áƒáƒšáƒ
        const allSymbols = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
        
        // áƒ’áƒšáƒáƒ‘áƒáƒšáƒ£áƒ áƒ˜ áƒªáƒ•áƒšáƒáƒ“áƒ”áƒ‘áƒ˜
        let currentSelectionCaptcha = '';
        let currentRotatingCaptcha = '';
        let hasChangedInSelectionChallenge = false;
        let selectionIndicator = null;
        let lastRotatingInputValue = '';
        let isSelectionCaptchaRevealed = false;
        
        // áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒ˜ CAPTCHA-áƒ¡ áƒ’áƒ”áƒœáƒ”áƒ áƒ˜áƒ áƒ”áƒ‘áƒ
        function generateGeorgianCaptcha() {
            let captcha = '';
            
            for (let i = 0; i < 8; i++) {
                captcha += allSymbols[Math.floor(Math.random() * allSymbols.length)];
            }
            
            georgianCaptchaDisplay.textContent = captcha;
            georgianCaptchaInput.value = '';
        }
        
        // áƒ›áƒáƒœáƒ˜áƒ¨áƒ•áƒœáƒ˜áƒ— CAPTCHA-áƒ¡ áƒ’áƒ”áƒœáƒ”áƒ áƒ˜áƒ áƒ”áƒ‘áƒ
        function generateSelectionCaptcha() {
            let captcha = '';
            
            for (let i = 0; i < 8; i++) {
                captcha += allSymbols[Math.floor(Math.random() * allSymbols.length)];
            }
            
            currentSelectionCaptcha = captcha;
            // áƒ“áƒáƒ•áƒáƒ‘áƒ áƒ£áƒœáƒáƒ— áƒ•áƒáƒ áƒ¡áƒ™áƒ•áƒšáƒáƒ•áƒ”áƒ‘áƒ˜
            selectionCaptchaDisplay.textContent = '********';
            selectionCaptchaInput.value = '';
            hasChangedInSelectionChallenge = false;
            isSelectionCaptchaRevealed = false;
        }
        
        // áƒ‘áƒ áƒ£áƒœáƒ•áƒáƒ“áƒ˜ CAPTCHA-áƒ¡ áƒ’áƒ”áƒœáƒ”áƒ áƒ˜áƒ áƒ”áƒ‘áƒ
        function generateRotatingCaptcha() {
            let captcha = '';
            
            for (let i = 0; i < 8; i++) {
                captcha += allSymbols[Math.floor(Math.random() * allSymbols.length)];
            }
            
            currentRotatingCaptcha = captcha;
            rotatingCaptchaDisplay.textContent = currentRotatingCaptcha;
            rotatingCaptchaInput.value = '';
            lastRotatingInputValue = '';
        }
        
        // áƒ˜áƒœáƒ’áƒšáƒ˜áƒ¡áƒ£áƒ áƒ˜áƒ“áƒáƒœ áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒáƒ“ áƒ’áƒáƒ“áƒáƒ§áƒ•áƒáƒœáƒ
        function convertToGeorgian(englishText) {
            return englishText.split('').map(char => enToKaMap[char] || char).join('');
        }
        
        // áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒ˜ CAPTCHA-áƒ¡ áƒ¨áƒ”áƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ
        function verifyGeorgianCaptcha() {
            const userInput = georgianCaptchaInput.value.trim();
            const originalCaptcha = georgianCaptchaDisplay.textContent;
            const expectedGeorgian = convertToGeorgian(originalCaptcha);
            
            const isCorrect = userInput === expectedGeorgian;
            
            if (isCorrect) {
                // áƒ’áƒáƒ“áƒáƒ¡áƒ•áƒšáƒ áƒ›áƒ”áƒáƒ áƒ” áƒ”áƒ¢áƒáƒáƒ–áƒ”
                verifyGeorgianButton.textContent = 'âœ… áƒ¡áƒ¬áƒáƒ áƒ˜áƒ!';
                
                setTimeout(() => {
                    georgianChallenge.style.display = 'none';
                    selectionChallenge.style.display = 'flex';
                    mainTitle.textContent = 'CAPTCHA áƒ¢áƒ”áƒ¡áƒ¢áƒ˜';
                    generateSelectionCaptcha();
                }, 1000);
            } else {
                // áƒáƒ áƒáƒ¡áƒ¬áƒáƒ áƒ˜ áƒáƒáƒ¡áƒ£áƒ®áƒ˜
                verifyGeorgianButton.style.background = '#e74c3c';
                georgianCaptchaInput.style.borderColor = '#e74c3c';
                
                setTimeout(() => {
                    verifyGeorgianButton.style.background = '#3498db';
                    georgianCaptchaInput.style.borderColor = '#3498db';
                    georgianCaptchaInput.value = '';
                    generateGeorgianCaptcha();
                }, 1000);
            }
        }
        
        // áƒ›áƒáƒœáƒ˜áƒ¨áƒ•áƒœáƒ˜áƒ— CAPTCHA-áƒ¡ áƒšáƒáƒ’áƒ˜áƒ™áƒ
        function handleTextSelection() {
            if (hasChangedInSelectionChallenge) return; // áƒ›áƒ®áƒáƒšáƒáƒ“ áƒ”áƒ áƒ—áƒ®áƒ”áƒš áƒ¨áƒ”áƒ˜áƒªáƒ•áƒšáƒ”áƒ‘áƒ
            
            // áƒ—áƒ£ áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ˜ áƒ¯áƒ”áƒ  áƒáƒ  áƒáƒ áƒ˜áƒ¡ áƒ’áƒáƒ›áƒáƒ•áƒšáƒ”áƒœáƒ˜áƒšáƒ˜, áƒ’áƒáƒ›áƒáƒ•áƒáƒ•áƒšáƒ˜áƒœáƒáƒ—
            if (!isSelectionCaptchaRevealed) {
                selectionCaptchaDisplay.textContent = currentSelectionCaptcha;
                isSelectionCaptchaRevealed = true;
                return;
            }
            
            // áƒ—áƒ£ áƒ¢áƒ”áƒ¥áƒ¡áƒ¢áƒ˜ áƒ£áƒ™áƒ•áƒ” áƒ’áƒáƒ›áƒáƒ•áƒšáƒ”áƒœáƒ˜áƒšáƒ˜áƒ, áƒ¨áƒ”áƒ•áƒªáƒ•áƒáƒšáƒáƒ—
            const symbols = currentSelectionCaptcha.split('');
            const changeCount = Math.floor(Math.random() * 2) + 2; // 2-3 áƒ¡áƒ˜áƒ›áƒ‘áƒáƒšáƒáƒ¡ áƒªáƒ•áƒšáƒ˜áƒšáƒ”áƒ‘áƒ
            
            for (let i = 0; i < changeCount; i++) {
                const pos = Math.floor(Math.random() * 8);
                symbols[pos] = allSymbols[Math.floor(Math.random() * allSymbols.length)];
            }
            
            currentSelectionCaptcha = symbols.join('');
            selectionCaptchaDisplay.textContent = currentSelectionCaptcha;
            hasChangedInSelectionChallenge = true;
            
            // áƒáƒœáƒ˜áƒ›áƒáƒªáƒ˜áƒ
            selectionCaptchaDisplay.style.transform = 'scale(1.05)';
            setTimeout(() => {
                selectionCaptchaDisplay.style.transform = 'scale(1)';
            }, 200);
        }
        
        // áƒ›áƒáƒ‘áƒ˜áƒšáƒ£áƒ áƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡ áƒ›áƒáƒœáƒ˜áƒ¨áƒ•áƒœáƒ˜áƒ¡ áƒ“áƒáƒ›áƒ£áƒ¨áƒáƒ•áƒ”áƒ‘áƒ
        function handleMobileSelection(event) {
            if (hasChangedInSelectionChallenge) return;
            
            const selection = window.getSelection();
            if (selection.toString().length > 0) {
                handleTextSelection();
                
                // áƒ›áƒáƒœáƒ˜áƒ¨áƒ•áƒœáƒ˜áƒ¡ áƒ˜áƒœáƒ“áƒ˜áƒ™áƒáƒ¢áƒáƒ áƒ˜áƒ¡ áƒ©áƒ•áƒ”áƒœáƒ”áƒ‘áƒ
                const range = selection.getRangeAt(0);
                const rect = range.getBoundingClientRect();
                
                if (selectionIndicator) {
                    document.body.removeChild(selectionIndicator);
                }
                
                selectionIndicator = document.createElement('div');
                selectionIndicator.className = 'selection-indicator';
                selectionIndicator.style.left = (rect.left + window.scrollX) + 'px';
                selectionIndicator.style.top = (rect.top + window.scrollY) + 'px';
                selectionIndicator.style.width = rect.width + 'px';
                selectionIndicator.style.height = rect.height + 'px';
                
                document.body.appendChild(selectionIndicator);
                
                setTimeout(() => {
                    if (selectionIndicator) {
                        document.body.removeChild(selectionIndicator);
                        selectionIndicator = null;
                    }
                }, 500);
                
                // áƒ›áƒáƒœáƒ˜áƒ¨áƒ•áƒœáƒ˜áƒ¡ áƒ›áƒáƒ¨áƒáƒ áƒ”áƒ‘áƒ
                selection.removeAllRanges();
            }
        }
        
        // áƒ›áƒáƒœáƒ˜áƒ¨áƒ•áƒœáƒ˜áƒ— CAPTCHA-áƒ¡ áƒ¨áƒ”áƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ
        function verifySelectionCaptcha() {
            const userInput = selectionCaptchaInput.value.toUpperCase();
            const isCorrect = userInput === currentSelectionCaptcha;
            
            if (isCorrect) {
                verifySelectionButton.textContent = 'âœ… áƒ¡áƒ¬áƒáƒ áƒ˜áƒ!';
                verifySelectionButton.disabled = true;
                selectionCaptchaInput.disabled = true;
                
                setTimeout(() => {
                    selectionChallenge.style.display = 'none';
                    rotatingChallenge.style.display = 'flex';
                    mainTitle.textContent = 'CAPTCHA áƒ¢áƒ”áƒ¡áƒ¢áƒ˜';
                    generateRotatingCaptcha();
                }, 1000);
            } else {
                verifySelectionButton.style.background = '#e74c3c';
                selectionCaptchaInput.style.borderColor = '#e74c3c';
                
                setTimeout(() => {
                    verifySelectionButton.style.background = '#3498db';
                    selectionCaptchaInput.style.borderColor = '#3498db';
                    verifySelectionButton.textContent = 'áƒ¨áƒ”áƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ';
                    selectionCaptchaInput.value = '';
                    generateSelectionCaptcha();
                }, 1000);
            }
        }
        
        // áƒ‘áƒ áƒ£áƒœáƒ•áƒáƒ“áƒ˜ CAPTCHA-áƒ¡ áƒšáƒáƒ’áƒ˜áƒ™áƒ
// áƒ‘áƒ áƒ£áƒœáƒ•áƒáƒ“áƒ˜ CAPTCHA-áƒ¡ áƒšáƒáƒ’áƒ˜áƒ™áƒ
function updateRotatingCaptchaBasedOnInput(currentInput) {
    // áƒ›áƒ®áƒáƒšáƒáƒ“ áƒ›áƒáƒ¨áƒ˜áƒœ áƒ•áƒªáƒ•áƒšáƒ˜áƒ— áƒ áƒáƒªáƒ áƒ›áƒáƒ›áƒ®áƒ›áƒáƒ áƒ”áƒ‘áƒ”áƒšáƒ˜ áƒáƒ™áƒ áƒ”áƒ¤áƒ¡ (áƒáƒ áƒ áƒ áƒáƒªáƒ áƒ¨áƒšáƒ˜áƒ¡)
    if (currentInput.length > lastRotatingInputValue.length) {
        const currentLength = currentInput.length;
        
        // áƒ áƒáƒªáƒ áƒ›áƒáƒ›áƒ®áƒ›áƒáƒ áƒ”áƒ‘áƒ”áƒšáƒ˜ áƒ¨áƒ”áƒ˜áƒ§áƒ•áƒáƒœáƒ¡ 3 áƒ¡áƒ˜áƒ›áƒ‘áƒáƒšáƒáƒ¡ â†’ áƒ˜áƒªáƒ•áƒšáƒ”áƒ‘áƒ áƒáƒ˜áƒ áƒ•áƒ”áƒšáƒ˜, áƒ›áƒ”áƒ®áƒ£áƒ—áƒ” áƒ“áƒ áƒ›áƒ”áƒ¨áƒ•áƒ˜áƒ“áƒ” áƒ¡áƒ˜áƒ›áƒ‘áƒáƒšáƒ
        if (currentLength === 3) {
            updateRotatingSymbols([0, 4, 6], [1, 5, 7]);
        }
        // áƒ áƒáƒªáƒ áƒ›áƒáƒ›áƒ®áƒ›áƒáƒ áƒ”áƒ‘áƒ”áƒšáƒ˜ áƒ¨áƒ”áƒ˜áƒ§áƒ•áƒáƒœáƒ¡ 6 áƒ¡áƒ˜áƒ›áƒ‘áƒáƒšáƒáƒ¡ â†’ áƒ˜áƒªáƒ•áƒšáƒ”áƒ‘áƒ áƒ¬áƒ˜áƒœáƒ 3 áƒ¡áƒ˜áƒ›áƒ‘áƒáƒšáƒ
        else if (currentLength === 6) {
            updateRotatingSymbols([0, 1, 2], [1, 2, 3]);
        }
        // áƒ áƒáƒªáƒ áƒ›áƒáƒ›áƒ®áƒ›áƒáƒ áƒ”áƒ‘áƒ”áƒšáƒ˜ áƒ¨áƒ”áƒ˜áƒ§áƒ•áƒáƒœáƒ¡ 7 áƒ¡áƒ˜áƒ›áƒ‘áƒáƒšáƒáƒ¡ â†’ áƒáƒ˜áƒ áƒ•áƒ”áƒšáƒ˜, áƒ›áƒ”áƒáƒ áƒ” áƒ“áƒ áƒ›áƒ”áƒáƒ—áƒ®áƒ”
        else if (currentLength === 7) {
            updateRotatingSymbols([0, 1, 3], [1, 2, 4]);
        }
        // áƒ áƒáƒªáƒ áƒ›áƒáƒ›áƒ®áƒ›áƒáƒ áƒ”áƒ‘áƒ”áƒšáƒ˜ áƒ¨áƒ”áƒ˜áƒ§áƒ•áƒáƒœáƒ¡ 8 áƒ¡áƒ˜áƒ›áƒ‘áƒáƒšáƒáƒ¡ â†’ áƒ˜áƒªáƒ•áƒšáƒ”áƒ‘áƒ áƒ¬áƒ˜áƒœáƒ 7 áƒ¡áƒ˜áƒ›áƒ‘áƒáƒšáƒ
        else if (currentLength === 8) {
            updateRotatingSymbols([0, 1, 2, 3, 4, 5, 6], [1, 2, 3, 4, 5, 6, 7]);
        }
    }
    // áƒ©áƒáƒœáƒáƒªáƒ•áƒšáƒ”áƒ‘áƒ áƒ›áƒ®áƒáƒšáƒáƒ“ 3, 6, 7, 8 áƒáƒáƒ–áƒ˜áƒªáƒ˜áƒ”áƒ‘áƒ–áƒ”
    else if (currentInput.length === lastRotatingInputValue.length && isReplacementAtSpecificPositions(currentInput)) {
        const changedPosition = findChangedPosition(currentInput);
        
        if (changedPosition === 2) { // áƒ›áƒ”-3 áƒáƒáƒ–áƒ˜áƒªáƒ˜áƒ
            updateRotatingSymbols([0, 4, 6], [1, 5, 7]);
        }
        else if (changedPosition === 5) { // áƒ›áƒ”-6 áƒáƒáƒ–áƒ˜áƒªáƒ˜áƒ
            updateRotatingSymbols([0, 1, 2], [1, 2, 3]);
        }
        else if (changedPosition === 6) { // áƒ›áƒ”-7 áƒáƒáƒ–áƒ˜áƒªáƒ˜áƒ
            updateRotatingSymbols([0, 1, 3], [1, 2, 4]);
        }
        else if (changedPosition === 7) { // áƒ›áƒ”-8 áƒáƒáƒ–áƒ˜áƒªáƒ˜áƒ
            updateRotatingSymbols([0, 1, 2, 3, 4, 5, 6], [1, 2, 3, 4, 5, 6, 7]);
        }
    }
    
    lastRotatingInputValue = currentInput;
}

// áƒ¨áƒ”áƒáƒ›áƒáƒ¬áƒ›áƒáƒ¡ áƒáƒ áƒ˜áƒ¡ áƒ—áƒ£ áƒáƒ áƒ áƒ”áƒ¡ áƒ©áƒáƒœáƒáƒªáƒ•áƒšáƒ”áƒ‘áƒ áƒ™áƒáƒœáƒ™áƒ áƒ”áƒ¢áƒ£áƒš áƒáƒáƒ–áƒ˜áƒªáƒ˜áƒ”áƒ‘áƒ–áƒ” (3, 6, 7, 8)
function isReplacementAtSpecificPositions(currentInput) {
    if (currentInput.length !== lastRotatingInputValue.length || currentInput === lastRotatingInputValue) {
        return false;
    }
    
    const changedPosition = findChangedPosition(currentInput);
    return changedPosition === 2 || changedPosition === 5 || changedPosition === 6 || changedPosition === 7;
}
        
        // áƒ¨áƒ”áƒáƒ›áƒáƒ¬áƒ›áƒáƒ¡ áƒáƒ áƒ˜áƒ¡ áƒ—áƒ£ áƒáƒ áƒ áƒ”áƒ¡ áƒ©áƒáƒœáƒáƒªáƒ•áƒšáƒ”áƒ‘áƒ áƒ™áƒáƒœáƒ™áƒ áƒ”áƒ¢áƒ£áƒš áƒáƒáƒ–áƒ˜áƒªáƒ˜áƒ”áƒ‘áƒ–áƒ” (6, 7, 8)
        function isReplacementAtSpecificPositions(currentInput) {
            if (currentInput.length !== lastRotatingInputValue.length || currentInput === lastRotatingInputValue) {
                return false;
            }
            
            const changedPosition = findChangedPosition(currentInput);
            return changedPosition === 5 || changedPosition === 6 || changedPosition === 7;
        }
        
        // áƒ˜áƒáƒáƒ•áƒáƒ¡ áƒ¨áƒ”áƒªáƒ•áƒšáƒ˜áƒšáƒ˜ áƒáƒáƒ–áƒ˜áƒªáƒ˜áƒ
        function findChangedPosition(currentInput) {
            for (let i = 0; i < currentInput.length; i++) {
                if (currentInput[i] !== lastRotatingInputValue[i]) {
                    return i;
                }
            }
            return -1;
        }
        
        function updateRotatingSymbols(positions, steps) {
            const symbols = currentRotatingCaptcha.split('');
            
            for (let i = 0; i < positions.length; i++) {
                const position = positions[i];
                const step = steps[i];
                symbols[position] = getNextSymbol(symbols[position], step);
            }
            
            currentRotatingCaptcha = symbols.join('');
            rotatingCaptchaDisplay.textContent = currentRotatingCaptcha;
        }
        
        function getNextSymbol(symbol, step) {
            const index = allSymbols.indexOf(symbol);
            if (index === -1) return symbol;
            
            return allSymbols[(index + step) % allSymbols.length];
        }
        
        // áƒ‘áƒ áƒ£áƒœáƒ•áƒáƒ“áƒ˜ CAPTCHA-áƒ¡ áƒ¨áƒ”áƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ
        function verifyRotatingCaptcha() {
            const userInput = rotatingCaptchaInput.value.toUpperCase();
            const isCorrect = userInput === currentRotatingCaptcha;
            
            if (isCorrect) {
                verifyRotatingButton.textContent = 'âœ… áƒ¡áƒ¬áƒáƒ áƒ˜áƒ!';
                verifyRotatingButton.disabled = true;
                rotatingCaptchaInput.disabled = true;
                
                setTimeout(() => {
                    rotatingChallenge.style.display = 'none';
                    successScreen.style.display = 'flex';
                }, 1000);
            } else {
                verifyRotatingButton.style.background = '#e74c3c';
                rotatingCaptchaInput.style.borderColor = '#e74c3c';
                
                setTimeout(() => {
                    verifyRotatingButton.style.background = '#3498db';
                    rotatingCaptchaInput.style.borderColor = '#3498db';
                    verifyRotatingButton.textContent = 'áƒ¨áƒ”áƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ';
                    rotatingCaptchaInput.value = '';
                    lastRotatingInputValue = '';
                    generateRotatingCaptcha();
                }, 1000);
            }
        }
        
        // áƒ˜áƒœáƒ˜áƒªáƒ˜áƒáƒšáƒ˜áƒ–áƒáƒªáƒ˜áƒ
        document.addEventListener('DOMContentLoaded', function() {
            generateGeorgianCaptcha();
            
            // áƒ›áƒáƒœáƒ˜áƒ¨áƒ•áƒœáƒ˜áƒ— CAPTCHA-áƒ¡áƒ—áƒ•áƒ˜áƒ¡ áƒ›áƒáƒœáƒ˜áƒ¨áƒ•áƒœáƒ˜áƒ¡ áƒ›áƒáƒ¡áƒ›áƒ”áƒœáƒ
            selectionCaptchaDisplay.addEventListener('select', handleTextSelection);
            
            // áƒ›áƒáƒ‘áƒ˜áƒšáƒ£áƒ áƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡ áƒ›áƒáƒœáƒ˜áƒ¨áƒ•áƒœáƒ˜áƒ¡ áƒ›áƒáƒ¡áƒ›áƒ”áƒœáƒ
            selectionCaptchaDisplay.addEventListener('touchstart', function(e) {
                this.classList.add('selecting');
            });
            
            selectionCaptchaDisplay.addEventListener('touchend', function(e) {
                setTimeout(() => {
                    handleMobileSelection(e);
                    this.classList.remove('selecting');
                }, 100);
            });
            
            selectionCaptchaDisplay.addEventListener('mouseup', function(e) {
                handleMobileSelection(e);
            });
            
            // áƒ‘áƒ áƒ£áƒœáƒ•áƒáƒ“áƒ˜ CAPTCHA-áƒ¡áƒ—áƒ•áƒ˜áƒ¡ áƒ¨áƒ”áƒ§áƒ•áƒáƒœáƒ˜áƒ¡ áƒ›áƒáƒœáƒ˜áƒ¢áƒáƒ áƒ˜áƒœáƒ’áƒ˜
            rotatingCaptchaInput.addEventListener('input', function() {
                updateRotatingCaptchaBasedOnInput(this.value.toUpperCase());
            });
        });
        
        // áƒ¦áƒ˜áƒšáƒáƒ™áƒ”áƒ‘áƒ˜áƒ¡ áƒ›áƒáƒ¡áƒ›áƒ”áƒœáƒ
        verifyGeorgianButton.addEventListener('click', verifyGeorgianCaptcha);
        verifySelectionButton.addEventListener('click', verifySelectionCaptcha);
        verifyRotatingButton.addEventListener('click', verifyRotatingCaptcha);
        
        restartButton.addEventListener('click', function() {
            successScreen.style.display = 'none';
            georgianChallenge.style.display = 'flex';
            selectionChallenge.style.display = 'none';
            rotatingChallenge.style.display = 'none';
            mainTitle.textContent = 'CAPTCHA áƒ¢áƒ”áƒ¡áƒ¢áƒ˜';
            
            verifyGeorgianButton.textContent = 'áƒ¨áƒ”áƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ';
            verifyGeorgianButton.disabled = false;
            verifyGeorgianButton.style.background = '#3498db';
            georgianCaptchaInput.disabled = false;
            georgianCaptchaInput.style.borderColor = '#3498db';
            
            verifySelectionButton.textContent = 'áƒ¨áƒ”áƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ';
            verifySelectionButton.disabled = false;
            verifySelectionButton.style.background = '#3498db';
            selectionCaptchaInput.disabled = false;
            selectionCaptchaInput.style.borderColor = '#3498db';
            
            verifyRotatingButton.textContent = 'áƒ¨áƒ”áƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ';
            verifyRotatingButton.disabled = false;
            verifyRotatingButton.style.background = '#3498db';
            rotatingCaptchaInput.disabled = false;
            rotatingCaptchaInput.style.borderColor = '#3498db';
            
            georgianCaptchaInput.value = '';
            selectionCaptchaInput.value = '';
            rotatingCaptchaInput.value = '';
            
            generateGeorgianCaptcha();
        });
        
        // Enter áƒ¦áƒ˜áƒšáƒáƒ™áƒ˜áƒ¡ áƒ›áƒ®áƒáƒ áƒ“áƒáƒ­áƒ”áƒ áƒ
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                if (georgianChallenge.style.display !== 'none') {
                    verifyGeorgianCaptcha();
                } else if (selectionChallenge.style.display !== 'none') {
                    verifySelectionCaptcha();
                } else if (rotatingChallenge.style.display !== 'none') {
                    verifyRotatingCaptcha();
                } else if (successScreen.style.display === 'flex') {
                    restartButton.click();
                }
            }
        });
    </script>
</body>
</html>
