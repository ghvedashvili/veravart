<script>
let lastTimezone = null;

function updateTimeInfo() {
    const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
    if (timezone === lastTimezone) return; // თუ არაფერი შეცვლილა, არაფერს აკეთებს
    lastTimezone = timezone;

    const messageElement = document.getElementById('message');
    const nextButton = document.getElementById('nextButton');

    let paragraphs = [];
    if (isAsianTimezone(timezone)) {
        paragraphs = [
            "ჩვენ ყოველთვის უნდა მივისწრაფოდეთ ევროპისკენ მიუხედავად ჩვენი გეოგრაფიული მდებარეობისა.",
            "არ უნდა შეგვეშინდეს ცვლილებების.",
            "ყველაფერს აქვს მნიშვნელობა თუმცა დრო უმნიშვნელოვანესია."
        ];
        nextButton.style.display = "none";
    } else if (isEuropeanTimezone(timezone)) {
        paragraphs = ["მე ვარ ქართველი და მაშასადამე ვარ ევროპელი."];
        nextButton.style.display = "block";
    } else {
        paragraphs = ["შენი დროის სარტყელი უცნობია."];
        nextButton.style.display = "none";
    }

    typeParagraphs(messageElement, paragraphs, 0);
}

// Typewriter ეფექტი აბზაცებისთვის
let typing = false;
function typeParagraphs(container, paragraphs, index) {
    if (typing) return;
    typing = true;
    container.innerHTML = '';

    function typeText(text, callback) {
        let i = 0;
        const p = document.createElement('p');
        container.appendChild(p);

        function typeChar() {
            if (i < text.length) {
                p.textContent += text.charAt(i);
                i++;
                setTimeout(typeChar, 50); // რეგულირება სიჩქარეზე
            } else {
                callback();
            }
        }

        typeChar();
    }

    function next() {
        if (index < paragraphs.length) {
            typeText(paragraphs[index], () => {
                index++;
                next();
            });
        } else {
            typing = false;
        }
    }

    next();
}

function isAsianTimezone(timezone) {
    const asianTimezones = [
        'Asia/Tbilisi','Asia/Dubai','Asia/Qatar','Asia/Muscat','Asia/Baku','Asia/Yerevan',
        'Asia/Tehran','Asia/Kabul','Asia/Karachi','Asia/Tashkent','Asia/Almaty','Asia/Bishkek',
        'Asia/Dushanbe','Asia/Ashgabat','Asia/Baghdad','Asia/Riyadh','Asia/Kuwait','Asia/Bahrain',
        'Asia/Amman','Asia/Beirut','Asia/Damascus','Asia/Jerusalem','Asia/Gaza','Asia/Hebron',
        'Asia/Aden','Asia/Kathmandu','Asia/Colombo','Asia/Dhaka','Asia/Thimphu','Asia/Rangoon',
        'Asia/Bangkok','Asia/Phnom_Penh','Asia/Vientiane','Asia/Saigon','Asia/Ho_Chi_Minh',
        'Asia/Jakarta','Asia/Kuala_Lumpur','Asia/Singapore','Asia/Manila','Asia/Taipei',
        'Asia/Hong_Kong','Asia/Macau','Asia/Shanghai','Asia/Seoul','Asia/Tokyo','Asia/Ulaanbaatar',
        'Asia/Pyongyang'
    ];
    return asianTimezones.includes(timezone);
}

function isEuropeanTimezone(timezone) {
    const europeanTimezones = [
        'Europe/London','Europe/Dublin','Europe/Lisbon','Europe/Madrid','Europe/Paris','Europe/Berlin',
        'Europe/Rome','Europe/Amsterdam','Europe/Brussels','Europe/Vienna','Europe/Prague','Europe/Warsaw',
        'Europe/Budapest','Europe/Bucharest','Europe/Sofia','Europe/Athens','Europe/Istanbul','Europe/Kiev',
        'Europe/Minsk','Europe/Moscow','Europe/Helsinki','Europe/Stockholm','Europe/Oslo','Europe/Copenhagen',
        'Europe/Riga','Europe/Tallinn','Europe/Vilnius','Europe/Zurich','Europe/Geneva','Europe/Luxembourg',
        'Europe/Monaco','Europe/Andorra','Europe/San_Marino','Europe/Vatican','Europe/Belgrade','Europe/Zagreb',
        'Europe/Sarajevo','Europe/Skopje','Europe/Tirana','Europe/Chisinau'
    ];
    return europeanTimezones.includes(timezone);
}

// ინიციალიზაცია
updateTimeInfo();
setInterval(updateTimeInfo, 5000); // ყოველი 5 წამში გადაამოწმებს ცვლილებას

// ღილაკის მოსმენა
document.getElementById('nextButton').addEventListener('click', function() {
    alert('Coming Soon!');
});
</script>