<!doctype html>
<html lang="ka">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Screenshot placeholder test (fixed print)</title>
  <style>
    html,body { height:100%; margin:0; font-family: Arial, sans-serif; }
    .wrap { min-height:100vh; display:flex; align-items:center; justify-content:center; }
    #real-content { text-align:center; padding:24px; }
    #placeholder {
      display:none;
      align-items:center;
      justify-content:center;
      height:100vh;
      text-align:center;
      font-size:22px;
      font-weight:600;
      background:#f7f7f7;
      color:#333;
    }

    /* --- PRINT FIX --- */
    @media print {
      body * { visibility:hidden !important; }
      #print-placeholder {
        display:flex !important;
        visibility:visible !important;
        position:fixed; left:0; top:0; right:0; bottom:0;
        align-items:center; justify-content:center;
        background:#fff;
        color:#000;
        font-size:22px; font-weight:600;
      }
    }

    .controls {
      position:fixed; top:10px; right:10px;
      background:rgba(255,255,255,0.9); padding:8px; border-radius:6px;
      box-shadow:0 2px 8px rgba(0,0,0,0.08);
    }
    button { padding:6px 10px; cursor:pointer; }
  </style>
</head>
<body>
  <div class="controls">
    <button id="toggleHeadless">Simulate headless: OFF</button>
    <button id="printBtn" style="margin-left:8px">Print (Save as PDF)</button>
  </div>

  <div id="real-content" class="wrap">
    <div>
      <h1>ტესტ</h1>
      <p> ციფრულ სამყარო არც ისე სანდოა</p>
    </div>
  </div>

  <div id="placeholder">
    გვერდი დაცულია — სქრინშოტზე ცარიელი ჩანს
  </div>

  <!-- PRINT MODE PLACEHOLDER (ახლა არაა display:none) -->
  <div id="print-placeholder" class="wrap" style="display:none;">
   ყოჩაღ password:vearavart
  </div>

  <script>
    (function(){
      const real = document.getElementById('real-content');
      const placeholder = document.getElementById('placeholder');
      const toggleBtn = document.getElementById('toggleHeadless');
      const printBtn = document.getElementById('printBtn');

      function showPlaceholder(on) {
        if (on) {
          real.style.display = 'none';
          placeholder.style.display = 'flex';
        } else {
          real.style.display = 'flex';
          placeholder.style.display = 'none';
        }
        toggleBtn.textContent = 'Simulate headless: ' + (on ? 'ON' : 'OFF');
      }

      const automatedDetected = navigator.webdriver === true ||
        /HeadlessChrome|PhantomJS|SlimerJS|Puppeteer/i.test(navigator.userAgent);

      const params = new URLSearchParams(location.search);
      const forced = params.get('headless') === '1';

      const initial = automatedDetected || forced;
      showPlaceholder(initial);

      let simulated = initial;
      toggleBtn.addEventListener('click', ()=>{
        simulated = !simulated;
        showPlaceholder(simulated);
      });

      printBtn.addEventListener('click', ()=> window.print());
    })();
  </script>
</body>
</html>
